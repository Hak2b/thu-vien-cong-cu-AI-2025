<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giao diện Công cụ AI</title>
    <!-- Tải Tailwind CSS từ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, #e0f2fe, #fff);
        }
        .ai-tool-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .ai-tool-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .ai-tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.15;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .ai-tool-card:hover::before {
            opacity: 0.25;
        }
        .gradient-teal::before { background: linear-gradient(to bottom right, #5eead4, #14b8a6); }
        .gradient-indigo::before { background: linear-gradient(to bottom right, #818cf8, #6366f1); }
        .gradient-purple::before { background: linear-gradient(to bottom right, #c084fc, #a855f7); }
        .gradient-green::before { background: linear-gradient(to bottom right, #86efac, #4ade80); }
        .gradient-yellow::before { background: linear-gradient(to bottom right, #fde047, #facc15); }
        .gradient-orange::before { background: linear-gradient(to bottom right, #fdba74, #fb923c); }
        .gradient-fuchsia::before { background: linear-gradient(to bottom right, #e879f9, #d946ef); }
        .gradient-lime::before { background: linear-gradient(to bottom right, #a3e635, #84cc16); }
        .gradient-cyan::before { background: linear-gradient(to bottom right, #22d3ee, #06b6d4); }
        .gradient-violet::before { background: linear-gradient(to bottom right, #a78bfa, #8b5cf6); }
        .gradient-emerald::before { background: linear-gradient(to bottom right, #6ee7b7, #34d399); }
        .gradient-blue::before { background: linear-gradient(to bottom right, #93c5fd, #60a5fa); }
        .gradient-pink::before { background: linear-gradient(to bottom right, #f472b6, #ec4899); }
        .gradient-rose::before { background: linear-gradient(to bottom right, #fda4af, #f43f5e); }
        .gradient-amber::before { background: linear-gradient(to bottom right, #fcd34d, #fbbf24); }
        .gradient-sky::before { background: linear-gradient(to bottom right, #7dd3fc, #38bdf8); }
        
        .filter-btn {
            transition: all 0.2s ease;
        }
        .filter-btn.active {
            background-color: #ffffff !important;
            color: #1d4ed8;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .editable-field {
            border: 1px solid #e2e8f0;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 8px;
            width: 100%;
            transition: all 0.2s;
        }
        .editable-field:focus {
            outline: none;
            border-color: #3b82f6;
        }
        .modal-bg {
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        .toast-notification {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            padding: 1rem 1.5rem;
            background-color: #10b981;
            color: #ffffff;
            font-weight: 600;
            border-radius: 9999px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .toast-notification.show {
            opacity: 1;
            visibility: visible;
        }
        .category-scroll-container {
            max-height: 500px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #a0aec0 #edf2f7;
        }
        .category-scroll-container::-webkit-scrollbar {
            width: 8px;
        }
        .category-scroll-container::-webkit-scrollbar-thumb {
            background-color: #a0aec0;
            border-radius: 4px;
        }
        .category-scroll-container::-webkit-scrollbar-track {
            background-color: #edf2f7;
        }
    </style>
</head>
<body class="text-slate-800 antialiased">
    <!-- Header Section -->
    <header class="bg-gradient-to-r from-sky-600 to-indigo-700 shadow-lg rounded-b-3xl mx-4 mt-4 md:mx-10 md:mt-6 py-6">
        <div class="container mx-auto px-6 md:flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-white tracking-tight text-center md:text-left mb-4 md:mb-0">
                Thư viện Công cụ AI
            </h1>
            <div class="flex flex-col md:flex-row items-center w-full md:w-1/3 space-y-4 md:space-y-0 md:space-x-4">
                <input type="text" id="search-input" placeholder="Tìm kiếm công cụ..." class="w-full p-3 rounded-full border border-slate-300 focus:outline-none focus:ring-2 focus:ring-sky-200 transition-all duration-300 shadow-sm">
                <button id="admin-toggle-btn" class="w-full md:w-auto p-3 rounded-full bg-slate-100 text-slate-800 font-bold hover:bg-slate-300 transition-colors duration-300 shadow-md">
                    Quản trị
                </button>
            </div>
        </div>
    </header>
    <!-- Main Content Section -->
    <main class="container mx-auto px-4 py-8 md:px-6 md:py-12">
        <div class="flex flex-col md:flex-row gap-8">
            <!-- Sidebar for Filters and Admin Buttons -->
            <aside class="md:w-1/4 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl shadow-xl p-6 h-fit sticky top-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-slate-900">Danh mục</h2>
                </div>
                <!-- Vùng chứa các nút danh mục, có thanh cuộn dọc -->
                <div id="filter-container" class="space-y-2 category-scroll-container">
                    <!-- Category filter buttons will be dynamically added here -->
                </div>
                <!-- Admin buttons for categories (visible only in admin mode) -->
                <div id="admin-category-actions" class="mt-4 space-y-2 hidden border-t pt-4 border-slate-200">
                    <button id="add-category-btn" class="w-full p-3 rounded-lg bg-emerald-500 text-white font-bold hover:bg-emerald-600 transition-colors duration-300">
                        Thêm Danh mục
                    </button>
                    <button id="rename-category-btn" class="w-full p-3 rounded-lg bg-amber-500 text-white font-bold hover:bg-amber-600 transition-colors duration-300 hidden">
                        Đổi tên danh mục
                    </button>
                    <button id="delete-category-btn" class="w-full p-3 rounded-lg bg-rose-600 text-white font-bold hover:bg-rose-700 transition-colors duration-300 hidden">
                        Xoá danh mục
                    </button>
                    <button id="reset-data-btn" class="w-full p-3 rounded-lg bg-slate-400 text-white font-bold hover:bg-slate-500 transition-colors duration-300">
                        Reset Dữ liệu
                    </button>
                </div>
            </aside>
            <!-- AI Tools Grid and Add Tool button -->
            <section class="md:w-3/4">
                <div class="flex justify-end mb-4">
                    <!-- Add Tool button (visible only to admin) -->
                    <button id="add-tool-btn" class="p-3 rounded-lg bg-green-500 text-white font-bold hover:bg-green-600 transition-colors duration-300 hidden">
                        Thêm Công cụ mới
                    </button>
                </div>
                <div id="tools-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- AI Tool Cards will be injected here by JavaScript -->
                </div>
            </section>
        </div>
    </main>
    <!-- Footer Section -->
    <footer class="bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-t-3xl shadow-inner mx-4 mb-4 md:mx-10 md:mb-6">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2024 YourCompany. Mọi quyền được bảo lưu.</p>
        </div>
    </footer>
    <!-- Custom Modal for various inputs and messages -->
    <div id="modal-container" class="modal-bg fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-lg">
            <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
            <p id="modal-message" class="text-sm text-rose-600 mb-4 hidden"></p>
            <div id="modal-content">
                <!-- Content will be injected here -->
            </div>
            <div class="mt-6 flex justify-end space-x-2">
                <button id="modal-cancel-btn" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors duration-200">Hủy</button>
                <button id="modal-confirm-btn" class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors duration-200">Xác nhận</button>
            </div>
        </div>
    </div>
    <!-- Notification element -->
    <div id="toast-notification" class="toast-notification">
        <span id="notification-message"></span>
    </div>

    <script>
        // Hàm lưu dữ liệu vào Local Storage
        const saveToLocalStorage = (key, data) => {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (e) {
                console.error("Lỗi khi lưu vào Local Storage", e);
            }
        };

        // Hàm lấy dữ liệu từ Local Storage
        const loadFromLocalStorage = (key) => {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            } catch (e) {
                console.error("Lỗi khi lấy dữ liệu từ Local Storage", e);
                return null;
            }
        };

        // Dữ liệu mặc định 20 danh mục
        const defaultCategories = [
            "Chatbot & Trợ lý AI", "Tạo ảnh", "Tạo văn bản", "Chỉnh sửa video", "Tổng hợp âm thanh", "Thuyết trình",
            "Marketing & Content", "Thiết kế & UX", "Năng suất & Tổ chức", "Phân tích dữ liệu",
            "E-commerce", "Sáng tạo nội dung", "Dịch thuật", "Giao tiếp", "Giáo dục & Học tập",
            "Tài chính", "Chăm sóc khách hàng", "Y tế & Sức khỏe", "Bán hàng",
            "An ninh mạng", "Gaming & Giải trí"
        ];
        
        // Dữ liệu công cụ mặc định ban đầu
        const initialToolsData = [
                {
                    id: 1,
                    name: "ChatGPT",
                    description: "Chatbot AI của OpenAI, hỗ trợ trả lời câu hỏi, viết nội dung, lập trình, và nhiều nhiệm vụ khác.",
                    instructions: "Truy cập website, đăng ký/đăng nhập. Nhập câu hỏi hoặc yêu cầu (prompt) vào ô trò chuyện. Tùy chỉnh giọng điệu (thân thiện, chuyên nghiệp) nếu cần. Phù hợp: Hỏi đáp, viết bài, hỗ trợ học tập. Lưu ý: Phiên bản miễn phí có giới hạn, nâng cấp ChatGPT Plus để có thêm tính năng.",
                    url: "https://chatgpt.com/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "🤖"
                },
                {
                    id: 2,
                    name: "LeonardoAI",
                    description: "Tạo hình ảnh chuyên cho thiết kế đồ họa, game, và concept art.",
                    instructions: "Đăng ký tài khoản tại leonardo.ai. Chọn kiểu hình ảnh (3D, anime, realistic), nhập prompt hoặc tải hình mẫu, tinh chỉnh thông số (độ phân giải, phong cách).",
                    url: "https://leonardo.ai/",
                    category: "Tạo ảnh",
                    icon: "🎨"
                },
                {
                    id: 3,
                    name: "StarryAI",
                    description: "Tạo avatar và hình ảnh nghệ thuật từ text, dễ sử dụng.",
                    instructions: "Truy cập starryai.com, đăng ký. Nhập mô tả hình ảnh, chọn phong cách (cartoon, realistic), tải xuống hoặc chỉnh sửa thêm.",
                    url: "https://starryai.com/",
                    category: "Tạo ảnh",
                    icon: "🌟"
                },
                {
                    id: 4,
                    name: "Dall-E",
                    description: "Công cụ tạo ảnh từ text của OpenAI, mạnh về hình ảnh sáng tạo.",
                    instructions: "Truy cập qua ChatGPT Plus hoặc API OpenAI. Nhập mô tả chi tiết, chọn hình phù hợp từ các kết quả.",
                    url: "https://openai.com/vi-VN/index/dall-e/",
                    category: "Tạo ảnh",
                    icon: "🖌️"
                },
                {
                    id: 5,
                    name: "Dream.AI",
                    description: "Tạo hình ảnh từ câu lệnh văn bản, hỗ trợ phong cách nghệ thuật đa dạng.",
                    instructions: "Truy cập dream.ai/create, nhập prompt, chọn kiểu hình ảnh và xuất file.",
                    url: "https://dream.ai/create",
                    category: "Tạo ảnh",
                    icon: "💭"
                },
                {
                    id: 6,
                    name: "Playground",
                    description: "Tái tạo hoặc chỉnh sửa ảnh dựa trên hình ảnh đầu vào hoặc text.",
                    instructions: "Tải lên ảnh hoặc nhập mô tả tại playground.com/design, chỉnh sửa bằng công cụ AI (thay nền, thêm chi tiết).",
                    url: "https://playground.com/design?new_user=1",
                    category: "Tạo ảnh",
                    icon: "🛠️"
                },
                {
                    id: 7,
                    name: "DeepDreamGenerator",
                    description: "Tạo ảnh nghệ thuật từ text, tự động tối ưu câu lệnh.",
                    instructions: "Nhập mô tả ngắn, chọn phong cách (surreal, realistic, v.v.) tại deepdreamgenerator.com.",
                    url: "https://deepdreamgenerator.com/generate",
                    category: "Tạo ảnh",
                    icon: "🌌"
                },
                {
                    id: 8,
                    name: "Bing Image Creator",
                    description: "Tạo ảnh từ text, tích hợp với công cụ tìm kiếm Bing.",
                    instructions: "Truy cập bing.com/images/create, đăng nhập tài khoản Microsoft, nhập mô tả, chọn phong cách.",
                    url: "https://www.bing.com/images/create",
                    category: "Tạo ảnh",
                    icon: "🔍"
                },
                {
                    id: 9,
                    name: "Craiyon",
                    description: "Tạo hình ảnh từ text, giao diện đơn giản, miễn phí.",
                    instructions: "Truy cập craiyon.com, nhập mô tả, chọn phong cách (nếu có) và tải xuống.",
                    url: "https://www.craiyon.com/",
                    category: "Tạo ảnh",
                    icon: "📷"
                },
                {
                    id: 10,
                    name: "Deep AI Art",
                    description: "Tạo hình ảnh nghệ thuật từ text hoặc chỉnh sửa ảnh với các bộ lọc AI.",
                    instructions: "Truy cập deepai.org, chọn công cụ 'Text to Image' hoặc 'Style Transfer', nhập mô tả hoặc tải ảnh lên, tùy chỉnh phong cách.",
                    url: "https://deepai.org/",
                    category: "Tạo ảnh",
                    icon: "🎭"
                },
                {
                    id: 11,
                    name: "Fotor AI Image Generator",
                    description: "Tạo và chỉnh sửa ảnh với AI, tích hợp công cụ thiết kế.",
                    instructions: "Truy cập fotor.com/ai-image-generator, đăng ký, nhập prompt hoặc dùng công cụ chỉnh sửa (xóa nền, thêm hiệu ứng).",
                    url: "https://www.fotor.com/ai-image-generator/",
                    category: "Tạo ảnh",
                    icon: "🖼️"
                },
                {
                    id: 12,
                    name: "Imagine",
                    description: "Tạo hình ảnh từ text với các phong cách đa dạng.",
                    instructions: "Đăng ký tại imagine.art, nhập mô tả chi tiết, chọn phong cách (realistic, anime, v.v.), tải xuống hoặc chỉnh sửa.",
                    url: "https://www.imagine.art/",
                    category: "Tạo ảnh",
                    icon: "✨"
                },
                {
                    id: 13,
                    name: "Night Cafe",
                    description: "Tạo hình ảnh nghệ thuật từ text, hỗ trợ nhiều phong cách như neural style transfer.",
                    instructions: "Đăng ký tại creator.nightcafe.studio, nhập prompt, chọn phong cách hoặc tải ảnh để chuyển đổi.",
                    url: "https://creator.nightcafe.studio/studio",
                    category: "Tạo ảnh",
                    icon: "🌙"
                },
                {
                    id: 14,
                    name: "Piclumen",
                    description: "Tạo và chỉnh sửa ảnh miễn phí với AI, giao diện thân thiện.",
                    instructions: "Truy cập piclumen.com, nhập prompt hoặc tải ảnh, dùng công cụ chỉnh sửa (xóa nền, thêm hiệu ứng).",
                    url: "https://www.piclumen.com/",
                    category: "Tạo ảnh",
                    icon: "📸"
                },
                {
                    id: 16,
                    name: "Adobe Firefly",
                    description: "Công cụ tạo và chỉnh sửa ảnh AI của Adobe, tích hợp với hệ sinh thái Adobe.",
                    instructions: "Đăng ký tài khoản Adobe, truy cập firefly.adobe.com. Nhập prompt hoặc chỉnh sửa ảnh có sẵn.",
                    url: "https://firefly.adobe.com/",
                    category: "Tạo ảnh",
                    icon: "🔥"
                },
                {
                    id: 17,
                    name: "Pngmaker.ai",
                    description: "Tạo ảnh miễn phí từ text, hỗ trợ tiếng Việt, giới hạn 10 ảnh.",
                    instructions: "Truy cập pngmaker.ai/vi, nhập mô tả bằng tiếng Việt, chọn phong cách và tải xuống.",
                    url: "https://pngmaker.ai/vi",
                    category: "Tạo ảnh",
                    icon: "🖼️"
                },
                {
                    id: 18,
                    name: "Dreamina",
                    description: "Tạo ảnh AI tích hợp trong CapCut, hỗ trợ chỉnh sửa nhanh.",
                    instructions: "Truy cập qua CapCut, chọn công cụ Dreamina, nhập prompt hoặc tải ảnh để chỉnh sửa.",
                    url: "https://dreamina.capcut.com/ai-tool/image/generate",
                    category: "Tạo ảnh",
                    icon: "💤"
                },
                {
                    id: 22,
                    name: "Claude",
                    description: "Chatbot AI của Anthropic, mạnh về xử lý văn bản dài, phân tích, và trả lời an toàn, đạo đức.",
                    instructions: "Đăng ký tài khoản trên website. Nhập câu hỏi hoặc tài liệu cần phân tích. Chọn chế độ trả lời (ngắn gọn hoặc chi tiết). Phù hợp: Phân tích tài liệu, viết báo cáo, tư vấn. Lưu ý: Không mạnh về lập trình như ChatGPT.",
                    url: "https://claude.ai/new",
                    category: "Chatbot & Trợ lý AI",
                    icon: "🗣️"
                },
                {
                    id: 43,
                    name: "Gemini",
                    description: "AI của Google, hỗ trợ tìm kiếm, trả lời câu hỏi, tích hợp với hệ sinh thái Google.",
                    instructions: "Truy cập, đăng nhập bằng tài khoản Google. Nhập câu hỏi hoặc yêu cầu (text, hình ảnh). Tích hợp với Google Docs, Gmail để tự động hóa. Phù hợp: Tìm kiếm thông tin, hỗ trợ công việc văn phòng. Lưu ý: Cần kết nối internet ổn định.",
                    url: "https://gemini.google.com/app",
                    category: "Chatbot & Trợ lý AI",
                    icon: "✨"
                },
                {
                    id: 63,
                    name: "Financier AI",
                    description: "Một trợ lý tài chính AI giúp phân tích thị trường, quản lý danh mục đầu tư và đưa ra lời khuyên cá nhân hóa.",
                    instructions: "Đăng nhập, đồng bộ tài khoản giao dịch, và sử dụng các công cụ phân tích biểu đồ, dự báo xu hướng thị trường.",
                    url: "https://financier.ai/",
                    category: "Tài chính",
                    icon: "💰"
                },
                {
                    id: 64,
                    name: "Character.AI",
                    description: "Tạo và trò chuyện với các nhân vật AI tùy chỉnh, từ nhân vật hư cấu đến người nổi tiếng.",
                    instructions: "Đăng ký, chọn hoặc tạo nhân vật AI. Nhập câu hỏi hoặc bắt đầu trò chuyện theo kịch bản. Phù hợp: Giáo dục sáng tạo, kể chuyện, giải trí. Lưu ý: Thích hợp cho học sinh hoặc sáng tạo nội dung.",
                    url: "https://character.ai/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "🎭"
                },
                {
                    id: 83,
                    name: "Symptom Checker AI",
                    description: "Công cụ AI giúp người dùng kiểm tra các triệu chứng bệnh và cung cấp thông tin y tế đáng tin cậy. ",
                    instructions: "Nhập triệu chứng, trả lời các câu hỏi phụ. Công cụ sẽ đưa ra thông tin có thể về tình trạng của bạn và đề xuất hành động cần thiết. Lưu ý: Không thay thế lời khuyên của bác sĩ.",
                    url: "https://symptomchecker.com/",
                    category: "Y tế & Sức khỏe",
                    icon: "❤️‍🩹"
                },
                {
                    id: 103,
                    name: "Sales Navigator AI",
                    description: "Tối ưu hóa quy trình bán hàng bằng cách tự động tìm kiếm khách hàng tiềm năng, phân tích dữ liệu và quản lý quan hệ khách hàng.",
                    instructions: "Thiết lập các tiêu chí tìm kiếm khách hàng. AI sẽ tự động tạo danh sách lead. Tích hợp với CRM của bạn để tự động gửi email và quản lý cuộc gọi.",
                    url: "https://salesnavigator.ai/",
                    category: "Bán hàng",
                    icon: "💼"
                },
                {
                    id: 106,
                    name: "Grok",
                    description: "AI của xAI, hỗ trợ trả lời câu hỏi, phân tích dữ liệu và tìm kiếm thông tin thời gian thực. Được tích hợp sâu vào nền tảng X.",
                    instructions: "Truy cập grok.com hoặc ứng dụng X, sau đó đăng nhập. Nhập câu hỏi hoặc yêu cầu. Bạn cũng có thể dùng chế độ giọng nói trên ứng dụng di động. Lưu ý: Grok có phiên bản miễn phí với giới hạn, và phiên bản SuperGrok cung cấp quota cao hơn.",
                    url: "https://grok.com/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "🧠"
                },
                {
                    id: 123,
                    name: "Video Editor Pro AI",
                    description: "Tự động hóa chỉnh sửa video, từ cắt ghép, thêm hiệu ứng đến lồng tiếng AI.",
                    instructions: "Tải video lên, chọn các yêu cầu chỉnh sửa (cắt, ghép, thêm nhạc). AI sẽ tạo bản nháp đầu tiên. Sau đó bạn có thể tinh chỉnh lại.",
                    url: "https://videoeditorpro.ai/",
                    category: "Chỉnh sửa video",
                    icon: "🎬"
                },
                {
                    id: 127,
                    name: "DeepSeek",
                    description: "Chatbot AI mạnh mẽ do một công ty Trung Quốc phát triển. Nó xuất sắc trong các tác vụ phức tạp như lập luận, lập trình, toán học, và xử lý tài liệu dài.",
                    instructions: "Truy cập trang web chat.deepseek.com hoặc tải ứng dụng di động DeepSeek. Đăng ký tài khoản (qua Gmail, Google, Yahoo). Nhập prompt của bạn để nhận câu trả lời, giải toán, viết code, v.v.",
                    url: "https://chat.deepseek.com/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "💻"
                },
                {
                    id: 143,
                    name: "AutoCut AI",
                    description: "Tự động cắt bỏ các đoạn im lặng, thêm phụ đề tự động và tạo highlight reel từ video dài.",
                    instructions: "Tải video lên. Công cụ sẽ tự động nhận diện và cắt các phần không cần thiết. Bạn có thể xuất video hoặc chỉnh sửa thêm.",
                    url: "https://autocut.com/",
                    category: "Chỉnh sửa video",
                    icon: "✂️"
                },
                {
                    id: 148,
                    name: "Google AI Studio",
                    description: "Môi trường phát triển (IDE) dựa trên web để thử nghiệm và xây dựng ứng dụng với các mô hình AI tạo sinh của Google như Gemini, Gemma, Veo.",
                    instructions: "Truy cập aistudio.google.com và đăng nhập bằng tài khoản Google. Khám phá thư viện prompt có sẵn hoặc tự xây dựng mô hình của riêng bạn. Sử dụng tính năng 'Get Code' để xuất mã.",
                    url: "https://aistudio.google.com/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "🛠️"
                },
                {
                    id: 149,
                    name: "AlphaSense",
                    description: "Nền tảng tìm kiếm và phân tích thị trường tài chính dựa trên AI, giúp các nhà đầu tư và chuyên gia tài chính đưa ra quyết định thông minh.",
                    instructions: "Truy cập alphasense.com, đăng ký tài khoản doanh nghiệp. Sử dụng các công cụ tìm kiếm và lọc nâng cao để phân tích dữ liệu thị trường, báo cáo tài chính, và tin tức từ các nguồn đáng tin cậy. Lưu ý: Đây là một công cụ chuyên nghiệp và có phí.",
                    url: "https://www.alphasense.com/",
                    category: "Tài chính",
                    icon: "📊"
                },
                {
                    id: 163,
                    name: "Motion Magic AI",
                    description: "Công cụ AI tạo hiệu ứng chuyển động, thêm đồ họa động và cải thiện chất lượng video một cách tự động.",
                    instructions: "Tải video lên, chọn hiệu ứng mong muốn từ thư viện. AI sẽ áp dụng và tối ưu hóa hiệu ứng cho video của bạn. ",
                    url: "https://motionmagic.ai/",
                    category: "Chỉnh sửa video",
                    icon: "✨"
                },
                {
                    id: 169,
                    name: "ChatbotX",
                    description: "Nền tảng AI dành cho người Việt, tích hợp GPT-4o, Claude, Gemini… hỗ trợ tạo chatbot, tìm kiếm thông tin, soạn nội dung, và nhiều trợ lý chuyên biệt.",
                    instructions: "Đăng ký và đăng nhập tại app.chatbotx.vn. Chọn công cụ bạn muốn dùng: Chat Pro, AI Photo, AI Workflow, hoặc một trong các trợ lý chuyên biệt. Nhập yêu cầu (prompt) và chờ nhận kết quả.",
                    url: "https://app.chatbotx.vn/",
                    category: "Chatbot & Trợ lý AI",
                    icon: "💬"
                },
                {
                    id: 170,
                    name: "Darktrace",
                description: "Một công cụ an ninh mạng hàng đầu, sử dụng AI để phát hiện và phản ứng tự động trước các mối đe dọa mạng, bao gồm cả các cuộc tấn công chưa từng được biết đến.",
                    instructions: "Truy cập trang web darktrace.com và liên hệ để được demo. Hệ thống Darktrace sẽ tự động học hành vi 'bình thường' của mạng nội bộ và sau đó có thể phát hiện các hành vi bất thường, từ đó đưa ra cảnh báo và hành động tự động. Lưu ý: Đây là giải pháp an ninh mạng cho doanh nghiệp.",
                    url: "https://www.darktrace.com/",
                    category: "An ninh mạng",
                    icon: "🔒"
                },
                {
                    id: 183,
                    name: "Color Grade AI",
                    description: "AI tự động hiệu chỉnh màu sắc, ánh sáng và tông màu của video để tạo ra chất lượng điện ảnh.",
                    instructions: "Tải video lên, chọn một phong cách màu sắc (ví dụ: cinematic, vintage, dramatic). AI sẽ áp dụng và cho bạn xem trước kết quả.",
                    url: "https://colorgrade.com/",
                    category: "Chỉnh sửa video",
                    icon: "🌈"
                },
                {
                    id: 203,
                    name: "Subtitle Pro AI",
                    description: "Tự động tạo phụ đề chính xác từ video, hỗ trợ nhiều ngôn ngữ và có thể chỉnh sửa dễ dàng.",
                    instructions: "Tải video lên, chọn ngôn ngữ của video. AI sẽ tạo phụ đề tự động. Bạn có thể tải file phụ đề (SRT) hoặc chèn trực tiếp vào video.",
                    url: "https://subtitlepro.ai/",
                    category: "Chỉnh sửa video",
                    icon: "💬"
                },
                // --- Dữ liệu mới được thêm vào đây ---
                {
                    id: 204,
                    name: "Synthesia",
                    description: "Tạo video chuyên nghiệp từ text với avatar kỹ thuật số và giọng nói AI.",
                    instructions: "Đăng ký, nhập văn bản hoặc kịch bản, chọn avatar, giọng nói, ngôn ngữ, tùy chỉnh nền và âm nhạc, xuất video.",
                    url: "https://www.synthesia.io/",
                    category: "Chỉnh sửa video",
                    icon: "🎥"
                },
                {
                    id: 205,
                    name: "Fliki",
                    description: "Tạo video ngắn từ văn bản, lý tưởng cho TikTok và Reels.",
                    instructions: "Đăng ký, nhập văn bản hoặc ý tưởng, chọn giọng nói và phong cách video, xuất hoặc chỉnh sửa thêm.",
                    url: "https://app.fliki.ai/",
                    category: "Chỉnh sửa video",
                    icon: "🎬"
                },
                {
                    id: 206,
                    name: "Pictory",
                    description: "Chuyển văn bản hoặc bài blog thành video với hình ảnh và giọng nói AI.",
                    instructions: "Đăng ký, nhập văn bản hoặc URL, chọn template video, tùy chỉnh và xuất video chất lượng cao.",
                    url: "https://pictory.ai/",
                    category: "Chỉnh sửa video",
                    icon: "📽️"
                },
                {
                    id: 207,
                    name: "Runway",
                    description: "Tạo và chỉnh sửa video AI (Gen-2, xóa nền, chuyển đổi phong cách).",
                    instructions: "Đăng ký, chọn công cụ như Text-to-Video hoặc Remove Background, nhập prompt hoặc tải nội dung, chỉnh sửa và xuất file.",
                    url: "https://runwayml.com/",
                    category: "Chỉnh sửa video",
                    icon: "🖌️"
                },
                {
                    id: 208,
                    name: "Wan.video",
                    description: "Tạo video từ text hoặc hình ảnh, hỗ trợ chỉnh sửa nhanh.",
                    instructions: "Truy cập, nhập prompt hoặc tải nội dung, chọn phong cách video và xuất file.",
                    url: "https://wan.video/",
                    category: "Chỉnh sửa video",
                    icon: "📹"
                },
                {
                    id: 209,
                    name: "Digen AI",
                    description: "Tạo video từ ảnh hoặc text, chuyên về chuyển đổi nội dung.",
                    instructions: "Đăng ký, tải ảnh hoặc nhập mô tả, chọn định dạng video, tùy chỉnh hiệu ứng và xuất file.",
                    url: "https://rm.digen.ai/home",
                    category: "Chỉnh sửa video",
                    icon: "🎨"
                },
                {
                    id: 210,
                    name: "Shakker.ai",
                    description: "Tạo hoặc chỉnh sửa video bằng AI, hỗ trợ model tùy chỉnh.",
                    instructions: "Đăng ký, tải model hoặc nhập prompt, tùy chỉnh video và xuất file.",
                    url: "https://www.shakker.ai/uploadmodel",
                    category: "Chỉnh sửa video",
                    icon: "🎛️"
                },
                {
                    id: 211,
                    name: "Haiper AI",
                    description: "Tạo video từ text hoặc hình ảnh, giao diện thân thiện.",
                    instructions: "Truy cập, nhập mô tả hoặc tải ảnh, chọn phong cách và xuất video.",
                    url: "https://haiper.ai/",
                    category: "Chỉnh sửa video",
                    icon: "🖼️"
                },
                {
                    id: 212,
                    name: "Kaiber.ai",
                    description: "Tạo video hoạt hình hoặc nghệ thuật từ text/ảnh.",
                    instructions: "Đăng ký, nhập prompt hoặc tải nội dung, chọn phong cách hoạt hình và xuất video.",
                    url: "https://www.kaiber.ai/superstudio",
                    category: "Chỉnh sửa video",
                    icon: "✨"
                },
                {
                    id: 213,
                    name: "Pixverse",
                    description: "Tạo video từ text hoặc hình ảnh, tập trung vào hiệu ứng nghệ thuật.",
                    instructions: "Đăng ký, nhập mô tả hoặc tải ảnh, tùy chỉnh hiệu ứng và xuất video.",
                    url: "https://app.pixverse.ai/home",
                    category: "Chỉnh sửa video",
                    icon: "🎆"
                },
                {
                    id: 214,
                    name: "Invideo AI",
                    description: "Tạo video từ text, tích hợp công cụ chỉnh sửa chuyên nghiệp.",
                    instructions: "Đăng ký, nhập kịch bản hoặc ý tưởng, chọn template, chỉnh sửa và xuất video.",
                    url: "https://ai.invideo.io/workspace",
                    category: "Chỉnh sửa video",
                    icon: "📝"
                },
                {
                    id: 215,
                    name: "Reve.art",
                    description: "Tạo ảnh và video từ text, hỗ trợ giao diện tiếng Việt.",
                    instructions: "Truy cập, nhập prompt bằng tiếng Việt, chọn định dạng video và xuất file.",
                    url: "https://preview.reve.art/app",
                    category: "Chỉnh sửa video",
                    icon: "🇻🇳"
                },
                {
                    id: 216,
                    name: "MagicHour.ai",
                    description: "Tạo và chỉnh sửa video, hỗ trợ faceswap và hiệu ứng AI.",
                    instructions: "Đăng ký, tải video/ảnh hoặc nhập prompt, chọn công cụ faceswap hoặc hiệu ứng, xuất video.",
                    url: "https://magichour.ai/create",
                    category: "Chỉnh sửa video",
                    icon: "🪄"
                },
                {
                    id: 217,
                    name: "Supawork.ai",
                    description: "Công cụ faceswap video miễn phí, thay đổi khuôn mặt trong video.",
                    instructions: "Tải video và ảnh khuôn mặt, chọn tùy chỉnh faceswap và xuất video.",
                    url: "https://supawork.ai/ai-video-face-swap",
                    category: "Chỉnh sửa video",
                    icon: "😎"
                },
                {
                    id: 218,
                    name: "Remaker.ai",
                    description: "Tạo video từ text với các hiệu ứng tùy chỉnh.",
                    instructions: "Truy cập, nhập mô tả video, chọn phong cách và xuất file.",
                    url: "https://remaker.ai/features/text-to-video/",
                    category: "Chỉnh sửa video",
                    icon: "🖋️"
                },
                {
                    id: 219,
                    name: "Vidwud",
                    description: "Công cụ faceswap video miễn phí, dễ sử dụng.",
                    instructions: "Tải video và ảnh khuôn mặt, áp dụng faceswap và xuất video.",
                    url: "https://www.vidwud.com/free-face-swap.html",
                    category: "Chỉnh sửa video",
                    icon: "🤖"
                },
                {
                    id: 220,
                    name: "Fakeface.io",
                    description: "Công cụ faceswap video và ảnh, hỗ trợ tạo nội dung sáng tạo.",
                    instructions: "Tải video/ảnh, chọn khuôn mặt thay thế, tùy chỉnh và xuất file.",
                    url: "https://fakeface.io/",
                    category: "Chỉnh sửa video",
                    icon: "🎭"
                },
                {
                    id: 221,
                    name: "iSmartta",
                    description: "Tạo video faceswap và giọng nói (bao gồm giọng Trump).",
                    instructions: "Truy cập, chọn công cụ faceswap hoặc voice generator, tải nội dung, tùy chỉnh và xuất.",
                    url: "https://www.ismartta.com/",
                    category: "Chỉnh sửa video",
                    icon: "🎙️"
                },
                {
                    id: 222,
                    name: "Swapfaces.ai",
                    description: "Công cụ faceswap video trực tuyến, dễ sử dụng.",
                    instructions: "Tải video và ảnh khuôn mặt, áp dụng faceswap và xuất video.",
                    url: "https://www.swapfaces.ai/video-face-swapper-online",
                    category: "Chỉnh sửa video",
                    icon: "📼"
                },
                {
                    id: 223,
                    name: "Cococlip.ai",
                    description: "Tạo video faceswap với hiệu ứng mượt mà.",
                    instructions: "Tải video/ảnh, chọn khuôn mặt thay thế, tùy chỉnh và xuất video.",
                    url: "https://cococlip.ai/features/video-face-swap",
                    category: "Chỉnh sửa video",
                    icon: "💫"
                },
                {
                    id: 224,
                    name: "Clipchamp",
                    description: "Tạo video với giọng nói AI, tích hợp công cụ chỉnh sửa video.",
                    instructions: "Đăng ký, nhập văn bản vào Text-to-Speech, chọn giọng và ngôn ngữ, chỉnh tone, xuất video hoặc audio. Phù hợp: Video hướng dẫn, lồng tiếng. Lưu ý: Gói miễn phí có giới hạn.",
                    url: "https://app.clipchamp.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 225,
                    name: "TopMediai",
                    description: "Chuyển văn bản thành giọng nói với nhiều ngôn ngữ và giọng điệu.",
                    instructions: "Truy cập, nhập văn bản, chọn giọng nói (nam/nữ, ngôn ngữ), tùy chỉnh tốc độ, xuất MP3. Phù hợp: Lồng tiếng, audiobook. Có credit miễn phí.",
                    url: "https://www.topmediai.com/app/text-to-speech/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 226,
                    name: "TTSFree",
                    description: "Công cụ Text-to-Speech miễn phí, hỗ trợ nhiều ngôn ngữ.",
                    instructions: "Đăng nhập để có thêm credit, nhập văn bản, chọn giọng, xuất audio. Phù hợp: Lồng tiếng, giáo dục. Giới hạn credit miễn phí.",
                    url: "https://ttsfree.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 227,
                    name: "TTSMP3",
                    description: "Chuyển văn bản thành giọng nói đơn giản, miễn phí.",
                    instructions: "Nhập văn bản, chọn ngôn ngữ/giọng nói, tải MP3. Phù hợp: Lồng tiếng nhanh, giáo dục. Free với chất lượng giọng cơ bản.",
                    url: "https://ttsmp3.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 228,
                    name: "FreeTTS",
                    description: "Text-to-Speech miễn phí, hỗ trợ nhiều ngôn ngữ.",
                    instructions: "Nhập văn bản, chọn giọng, tùy chỉnh tốc độ, xuất file. Phù hợp: Lồng tiếng, nội dung đơn giản. Có giới hạn ký tự miễn phí.",
                    url: "https://freetts.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 229,
                    name: "Luvvoice",
                    description: "Tạo giọng nói AI tự nhiên từ văn bản.",
                    instructions: "Nhập văn bản, chọn giọng và ngôn ngữ, xuất audio. Phù hợp: Lồng tiếng, audiobook. Kiểm tra giới hạn miễn phí.",
                    url: "https://luvvoice.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 230,
                    name: "TTSMaker",
                    description: "Chuyển văn bản thành giọng nói, hỗ trợ nhiều giọng điệu.",
                    instructions: "Nhập văn bản, chọn giọng, tùy chỉnh tốc độ, xuất file. Phù hợp: Lồng tiếng, giáo dục. Có giới hạn miễn phí hàng ngày.",
                    url: "https://ttsmaker.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 231,
                    name: "Text-to-Speech Online",
                    description: "Công cụ TTS trực tuyến, dễ sử dụng.",
                    instructions: "Nhập văn bản, chọn giọng, xuất MP3. Phù hợp: Lồng tiếng nhanh, nội dung đơn giản. Free với chất lượng giọng cơ bản.",
                    url: "https://www.text-to-speech.online/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 232,
                    name: "Crikk",
                    description: "Tạo giọng nói AI từ văn bản, hỗ trợ đa ngôn ngữ.",
                    instructions: "Đăng ký, nhập văn bản, chọn giọng, tùy chỉnh nhịp, xuất audio. Phù hợp: Lồng tiếng, đa ngôn ngữ. Kiểm tra gói miễn phí.",
                    url: "https://crikk.com/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 233,
                    name: "Text2Speech",
                    description: "Công cụ TTS miễn phí, giao diện đơn giản.",
                    instructions: "Nhập văn bản, chọn giọng, tải audio. Phù hợp: Lồng tiếng nhanh, giáo dục. Giới hạn ký tự miễn phí.",
                    url: "https://www.text2speech.org/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 234,
                    name: "iSmartta (Voice)",
                    description: "Tạo giọng nói AI, bao gồm giọng nổi tiếng như Trump.",
                    instructions: "Truy cập, chọn voice generator, nhập văn bản, chọn giọng, xuất audio. Phù hợp: Video giải trí, lồng tiếng sáng tạo. Kiểm tra giọng tiếng Việt.",
                    url: "https://www.ismartta.com/ai-voice-generator.html",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 235,
                    name: "Murf.ai",
                    description: "Tạo giọng nói AI tự nhiên cho video, thuyết trình, audiobook.",
                    instructions: "Đăng nhập, tạo project, nhập văn bản, chọn giọng, chỉnh tone/nhịp, thêm nhạc nền, xuất file. Phù hợp: Lồng tiếng chuyên nghiệp. Giọng tiếng Anh tốt, tiếng Việt cần cải thiện.",
                    url: "https://murf.ai/",
                    category: "Tổng hợp âm thanh",
                    icon: "📼"
                },
                {
                    id: 236,
                    name: "Minimax AI",
                    description: "Công cụ AI tạo và tổng hợp giọng nói tự nhiên, hỗ trợ nhiều ngôn ngữ và cảm xúc.",
                    instructions: "Đăng nhập, chọn mô hình giọng nói, nhập văn bản, điều chỉnh tốc độ và cảm xúc, sau đó xuất file audio.",
                    url: "https://www.minimax.chat/",
                    category: "Tổng hợp âm thanh",
                    icon: "🎤"
                },
                {
                    id: 237,
                    name: "ElevenLabs",
                    description: "Công cụ tạo giọng nói AI tự nhiên hàng đầu, hỗ trợ giọng đa ngôn ngữ và cá nhân hóa.",
                    instructions: "Tạo tài khoản, chọn giọng mẫu hoặc tạo giọng riêng, nhập văn bản, điều chỉnh cảm xúc và tốc độ, xuất file audio hoặc tích hợp API.",
                    url: "https://elevenlabs.io/",
                    category: "Tổng hợp âm thanh",
                    icon: "🎤"
                },
                {
                    id: 238,
                    name: "Writesonic",
                    description: "Viết nội dung marketing, blog, bài đăng mạng xã hội bằng AI.",
                    instructions: "Đăng ký, chọn loại nội dung (blog, ad, email), nhập brief, chọn bản nháp, chỉnh sửa và xuất.",
                    url: "https://writesonic.com/",
                    category: "Tạo văn bản",
                    icon: "✍️"
                },
                {
                    id: 239,
                    name: "Wordtune",
                    description: "Tóm tắt, diễn giải, cải thiện văn phong cho văn bản.",
                    instructions: "Đăng ký, nhập văn bản cần chỉnh sửa, chọn chế độ (tóm tắt, diễn giải, cải thiện), xuất văn bản.",
                    url: "https://www.wordtune.com/",
                    category: "Tạo văn bản",
                    icon: "📝"
                },
                {
                    id: 240,
                    name: "Sudowrite",
                    description: "Hỗ trợ viết truyện, tiểu thuyết, hoặc nội dung sáng tạo.",
                    instructions: "Đăng ký, nhập ý tưởng hoặc đoạn văn, AI gợi ý tiếp tục hoặc chỉnh sửa.",
                    url: "https://www.sudowrite.com/",
                    category: "Tạo văn bản",
                    icon: "📖"
                },
                {
                    id: 241,
                    name: "Rytr",
                    description: "Viết nội dung nhanh cho blog, quảng cáo, email.",
                    instructions: "Đăng ký, chọn loại nội dung, nhập mô tả ngắn, chọn giọng điệu, chỉnh sửa và xuất.",
                    url: "https://rytr.me/",
                    category: "Tạo văn bản",
                    icon: "⌨️"
                },
                {
                    id: 242,
                    name: "Scalenut",
                    description: "Tạo nội dung SEO, blog, và chiến lược nội dung.",
                    instructions: "Đăng ký, nhập từ khóa hoặc chủ đề, AI tạo outline và nội dung chi tiết, tối ưu SEO và xuất file.",
                    url: "https://www.scalenut.com/",
                    category: "Tạo văn bản",
                    icon: "📊"
                },
                {
                    id: 243,
                    name: "Copy.ai",
                    description: "Viết nội dung marketing, email, bài đăng mạng xã hội.",
                    instructions: "Đăng ký, chọn loại nội dung, nhập brief, chọn bản nháp, chỉnh sửa và xuất.",
                    url: "https://www.copy.ai/",
                    category: "Tạo văn bản",
                    icon: "📄"
                },    
                {
                    id: 244,
                    name: "Jasper",
                    description: "Tạo nội dung marketing, blog, và quảng cáo chuyên nghiệp.",
                    instructions: "Đăng ký, chọn template nội dung, nhập thông tin sản phẩm, chỉnh sửa bản nháp và xuất.",
                    url: "https://www.jasper.ai/",
                    category: "Tạo văn bản",
                    icon: "💼"
                }
            ];
        
        // Lấy dữ liệu từ Local Storage, nếu không có thì dùng dữ liệu mặc định ban đầu
        let categories = loadFromLocalStorage('categories') || defaultCategories;
        let toolsData = loadFromLocalStorage('toolsData') || initialToolsData;

        // Cập nhật biến nextToolId để không bị trùng khi thêm công cụ mới
        let nextToolId = toolsData.length > 0 ? Math.max(...toolsData.map(tool => tool.id)) + 1 : 1;

        // Dải màu gradient cho các nút danh mục
        const categoryGradients = [
            'bg-gradient-to-r from-teal-400 to-cyan-500',
            'bg-gradient-to-r from-indigo-400 to-blue-500',
            'bg-gradient-to-r from-purple-400 to-pink-500',
            'bg-gradient-to-r from-green-400 to-emerald-500',
            'bg-gradient-to-r from-yellow-400 to-amber-500',
            'bg-gradient-to-r from-orange-400 to-red-500',
            'bg-gradient-to-r from-fuchsia-400 to-rose-500',
            'bg-gradient-to-r from-lime-400 to-green-500',
            'bg-gradient-to-r from-cyan-400 to-sky-500',
            'bg-gradient-to-r from-violet-400 to-fuchsia-500',
            'bg-gradient-to-r from-emerald-400 to-teal-500',
            'bg-gradient-to-r from-blue-400 to-indigo-500',
            'bg-gradient-to-r from-pink-400 to-purple-500',
            'bg-gradient-to-r from-rose-400 to-red-500',
            'bg-gradient-to-r from-amber-400 to-yellow-500',
            'bg-gradient-to-r from-sky-400 to-cyan-500',
            'bg-gradient-to-r from-teal-400 to-green-500',
            'bg-gradient-to-r from-indigo-400 to-violet-500',
            'bg-gradient-to-r from-fuchsia-400 to-pink-500',
            'bg-gradient-to-r from-lime-400 to-yellow-500'
        ];

        // Dải màu gradient nhẹ nhàng cho các thẻ công cụ
        const toolCardGradients = [
            'gradient-teal', 'gradient-indigo', 'gradient-purple', 'gradient-green',
            'gradient-yellow', 'gradient-orange', 'gradient-fuchsia', 'gradient-lime',
            'gradient-cyan', 'gradient-violet', 'gradient-emerald', 'gradient-blue',
            'gradient-pink', 'gradient-rose', 'gradient-amber', 'gradient-sky'
        ];

        const toolsContainer = document.getElementById('tools-container');
        const searchInput = document.getElementById('search-input');
        const filterContainer = document.getElementById('filter-container');
        const adminToggleButton = document.getElementById('admin-toggle-btn');
        const adminCategoryActions = document.getElementById('admin-category-actions');
        const addCategoryBtn = document.getElementById('add-category-btn');
        const renameCategoryBtn = document.getElementById('rename-category-btn');
        const deleteCategoryBtn = document.getElementById('delete-category-btn');
        const resetDataBtn = document.getElementById('reset-data-btn');
        const addToolBtn = document.getElementById('add-tool-btn');
        const modalContainer = document.getElementById('modal-container');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalContent = document.getElementById('modal-content');
        const modalConfirmBtn = document.getElementById('modal-confirm-btn');
        const modalCancelBtn = document.getElementById('modal-cancel-btn');
        const toastNotification = document.getElementById('toast-notification');
        const notificationMessage = document.getElementById('notification-message');

        let isAdmin = false;
        let currentFilteredTools = [...toolsData];
        let activeCategory = 'all';
        let modalActionType = '';

        const showNotification = (message, isError = false) => {
            notificationMessage.textContent = message;
            if (isError) {
                toastNotification.classList.remove('bg-emerald-500');
                toastNotification.classList.add('bg-rose-500');
            } else {
                toastNotification.classList.remove('bg-rose-500');
                toastNotification.classList.add('bg-emerald-500');
            }
            toastNotification.classList.add('show');
            setTimeout(() => {
                toastNotification.classList.remove('show');
            }, 3000);
        };

        const getToolCardGradientClass = (categoryName) => {
            const categoryIndex = categories.indexOf(categoryName);
            if (categoryIndex !== -1) {
                return toolCardGradients[categoryIndex % toolCardGradients.length];
            }
            return '';
        };

        // Hàm render các thẻ công cụ ra màn hình
        const renderTools = (tools) => {
            toolsContainer.innerHTML = tools.map(tool => {
                const cardGradientClass = getToolCardGradientClass(tool.category);

                if (isAdmin) {
                    // Giao diện thẻ công cụ cho chế độ quản trị (có nút chỉnh sửa)
                    return `
                        <div class="ai-tool-card bg-white rounded-2xl shadow-xl p-6 flex flex-col justify-between ${cardGradientClass}" data-id="${tool.id}">
                            <div>
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4 tool-icon-display">${tool.icon}</span>
                                    <h3 class="text-xl font-bold text-slate-900 tool-name-display">${tool.name}</h3>
                                    <input type="text" value="${tool.name}" class="text-xl font-bold text-slate-900 editable-field hidden" data-field="name">
                                </div>
                                <p class="text-slate-600 leading-relaxed mb-4 tool-description-display">${tool.description}</p>
                                <textarea class="text-slate-600 leading-relaxed mb-4 editable-field hidden" data-field="description">${tool.description}</textarea>
                                
                                <p class="text-slate-500 text-sm italic mb-4 tool-instructions-display">
                                    **Hướng dẫn sử dụng:** ${tool.instructions}
                                </p>
                                <textarea class="text-slate-500 text-sm italic mb-4 editable-field hidden" data-field="instructions">${tool.instructions}</textarea>
                                
                                <input type="text" value="${tool.url}" class="text-slate-500 text-sm italic mb-4 editable-field hidden" data-field="url">
                                <span class="inline-block mt-2 text-xs font-semibold text-sky-600 bg-sky-50 px-3 py-1 rounded-full tool-category-display">${tool.category}</span>
                            </div>
                            <div class="mt-6 flex space-x-2">
                                <button class="w-full text-center bg-sky-600 text-white font-bold py-3 px-6 rounded-full hover:bg-sky-700 transition-colors duration-200 edit-btn">
                                    Chỉnh sửa
                                </button>
                                <button class="w-full text-center bg-emerald-500 text-white font-bold py-3 px-6 rounded-full hover:bg-emerald-600 transition-colors duration-200 save-btn hidden">
                                    Lưu
                                </button>
                                <button class="w-full text-center bg-rose-600 text-white font-bold py-3 px-6 rounded-full hover:bg-rose-700 transition-colors duration-200 delete-btn">
                                    Xóa
                                </button>
                            </div>
                        </div>
                    `;
                } else {
                    // Giao diện thẻ công cụ cho chế độ người dùng bình thường
                    return `
                        <div class="ai-tool-card bg-white rounded-2xl shadow-xl p-6 flex flex-col justify-between ${cardGradientClass}">
                            <div>
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4">${tool.icon}</span>
                                    <h3 class="text-xl font-bold text-slate-900">${tool.name}</h3>
                                </div>
                                <p class="text-slate-600 leading-relaxed mb-4">${tool.description}</p>
                                <p class="text-slate-500 text-sm italic mb-4">
                                    **Hướng dẫn sử dụng:** ${tool.instructions}
                                </p>
                                <span class="inline-block mt-2 text-xs font-semibold text-sky-600 bg-sky-50 px-3 py-1 rounded-full">${tool.category}</span>
                            </div>
                            <a href="${tool.url}" target="_blank" class="mt-6 inline-block w-full text-center bg-gradient-to-r from-sky-500 to-indigo-600 text-white font-bold py-3 px-6 rounded-full hover:opacity-90 transition-opacity duration-200">
                                Truy cập Công cụ
                            </a>
                        </div>
                    `;
                }
            }).join('');
        };

        // Hàm tạo các nút danh mục
        const createFilterButtons = () => {
            const uniqueCategories = [...new Set(categories)];

            let allButtonHtml = `
                <button class="filter-btn block w-full text-left py-2 px-4 rounded-lg font-semibold bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors duration-200 ${activeCategory === 'all' ? 'active' : ''}" data-category="all">
                    Tất cả
                </button>`;

            const categoryButtonsHtml = uniqueCategories.map((category, index) => {
                const gradientClass = categoryGradients[index % categoryGradients.length];
                return `
                    <button class="filter-btn block w-full text-left py-2 px-4 rounded-lg text-white font-medium ${gradientClass} hover:opacity-80 transition-opacity duration-200" data-category="${category}">
                        ${category}
                    </button>
                `;
            }).join('');

            filterContainer.innerHTML = allButtonHtml + categoryButtonsHtml;

            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const newActiveCategory = button.dataset.category;
                    if (activeCategory === newActiveCategory) return;
                    activeCategory = newActiveCategory;

                    const filteredTools = activeCategory === 'all'
                        ? toolsData
                        : toolsData.filter(tool => tool.category === activeCategory);

                    currentFilteredTools = filteredTools;
                    renderTools(currentFilteredTools);

                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    if (isAdmin && activeCategory !== 'all') {
                        addToolBtn.classList.remove('hidden');
                        renameCategoryBtn.classList.remove('hidden');
                        deleteCategoryBtn.classList.remove('hidden');
                    } else {
                        addToolBtn.classList.add('hidden');
                        renameCategoryBtn.classList.add('hidden');
                        deleteCategoryBtn.classList.add('hidden');
                    }
                });
            });
        };

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredTools = toolsData.filter(tool =>
                tool.name.toLowerCase().includes(searchTerm) ||
                tool.description.toLowerCase().includes(searchTerm)
            );

            currentFilteredTools = filteredTools;
            renderTools(currentFilteredTools);

            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            addToolBtn.classList.add('hidden');
            renameCategoryBtn.classList.add('hidden');
            deleteCategoryBtn.classList.add('hidden');
        });

        adminToggleButton.addEventListener('click', () => {
            if (isAdmin) {
                isAdmin = false;
                adminToggleButton.textContent = 'Quản trị';
                adminToggleButton.classList.remove('bg-rose-600', 'hover:bg-rose-700');
                adminToggleButton.classList.add('bg-slate-100', 'text-slate-800', 'hover:bg-slate-300');
                adminCategoryActions.classList.add('hidden');
                addToolBtn.classList.add('hidden');
                renameCategoryBtn.classList.add('hidden');
                deleteCategoryBtn.classList.add('hidden');
                renderTools(currentFilteredTools);
            } else {
                modalActionType = 'admin-login';
                modalContainer.classList.remove('hidden');
                modalTitle.textContent = 'Nhập mật khẩu quản trị';
                modalContent.innerHTML = `<input type="password" id="password-input" class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">`;
                document.getElementById('password-input').focus();
                modalMessage.classList.add('hidden');
            }
        });

        // Nút reset dữ liệu
        resetDataBtn.addEventListener('click', () => {
            modalActionType = 'reset-data';
            modalContainer.classList.remove('hidden');
            modalTitle.textContent = 'Xác nhận khôi phục dữ liệu';
            modalContent.innerHTML = `<p class="text-sm text-rose-600">Bạn có chắc chắn muốn khôi phục lại dữ liệu mặc định ban đầu không? Mọi thay đổi của bạn sẽ bị mất.</p>`;
            modalMessage.classList.add('hidden');
        });

        addCategoryBtn.addEventListener('click', () => {
            modalActionType = 'add-category';
            modalContainer.classList.remove('hidden');
            modalTitle.textContent = 'Thêm Danh mục mới';
            modalContent.innerHTML = `<input type="text" id="category-name-input" placeholder="Tên danh mục..." class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">`;
            document.getElementById('category-name-input').focus();
            modalMessage.classList.add('hidden');
        });

        renameCategoryBtn.addEventListener('click', () => {
            if (activeCategory === 'all') return;
            modalActionType = 'rename-category';
            modalContainer.classList.remove('hidden');
            modalTitle.textContent = `Đổi tên danh mục "${activeCategory}"`;
            modalContent.innerHTML = `<input type="text" id="new-category-name-input" value="${activeCategory}" class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">`;
            document.getElementById('new-category-name-input').focus();
            modalMessage.classList.add('hidden');
        });

        deleteCategoryBtn.addEventListener('click', () => {
            if (activeCategory === 'all') return;
            modalActionType = 'delete-category';
            modalContainer.classList.remove('hidden');
            modalTitle.textContent = `Xác nhận xoá danh mục`;
            modalContent.innerHTML = `<p class="text-sm text-rose-600">Bạn có chắc chắn muốn xoá danh mục **"${activeCategory}"** và **tất cả** các công cụ bên trong không? Thao tác này không thể hoàn tác.</p>`;
            modalMessage.classList.add('hidden');
        });

        addToolBtn.addEventListener('click', () => {
            modalActionType = 'add-tool';
            modalContainer.classList.remove('hidden');
            modalTitle.textContent = `Thêm công cụ vào danh mục "${activeCategory}"`;
            modalContent.innerHTML = `
                <div class="space-y-4">
                    <input type="text" id="tool-name-input" placeholder="Tên công cụ..." class="w-full p-3 border border-slate-300 rounded-lg">
                    <input type="text" id="tool-icon-input" placeholder="Icon (ví dụ: 🎨)" class="w-full p-3 border border-slate-300 rounded-lg">
                    <textarea id="tool-description-input" placeholder="Mô tả..." rows="3" class="w-full p-3 border border-slate-300 rounded-lg"></textarea>
                    <textarea id="tool-instructions-input" placeholder="Hướng dẫn sử dụng..." rows="3" class="w-full p-3 border border-slate-300 rounded-lg"></textarea>
                    <input type="text" id="tool-url-input" placeholder="URL trang web..." class="w-full p-3 border border-slate-300 rounded-lg">
                </div>
            `;
            document.getElementById('tool-name-input').focus();
            modalMessage.classList.add('hidden');
        });

        modalConfirmBtn.addEventListener('click', () => {
            if (modalActionType === 'admin-login') {
                const password = document.getElementById('password-input').value;
                // Mật khẩu quản trị
                if (password === 'hakadmin') {
                    isAdmin = true;
                    adminToggleButton.textContent = 'Thoát Quản trị';
                    adminToggleButton.classList.remove('bg-slate-100', 'text-slate-800', 'hover:bg-slate-300');
                    adminToggleButton.classList.add('bg-rose-600', 'hover:bg-rose-700', 'text-white');
                    adminCategoryActions.classList.remove('hidden');
                    if (activeCategory !== 'all') {
                        addToolBtn.classList.remove('hidden');
                        renameCategoryBtn.classList.remove('hidden');
                        deleteCategoryBtn.classList.remove('hidden');
                    }
                    renderTools(currentFilteredTools);
                    modalContainer.classList.add('hidden');
                    showNotification('Đã đăng nhập chế độ quản trị.');
                } else {
                    modalMessage.textContent = 'Mật khẩu không chính xác.';
                    modalMessage.classList.remove('hidden');
                }
            } else if (modalActionType === 'reset-data') {
                localStorage.removeItem('categories');
                localStorage.removeItem('toolsData');
                window.location.reload();
                showNotification('Đã khôi phục dữ liệu mặc định.');
            } else if (modalActionType === 'add-category') {
                const newCategoryName = document.getElementById('category-name-input').value.trim();
                if (newCategoryName && !categories.includes(newCategoryName)) {
                    categories.push(newCategoryName);
                    saveToLocalStorage('categories', categories);
                    createFilterButtons();
                    modalContainer.classList.add('hidden');
                    showNotification(`Đã thêm danh mục "${newCategoryName}".`);
                } else {
                    modalMessage.textContent = 'Tên danh mục không hợp lệ hoặc đã tồn tại.';
                    modalMessage.classList.remove('hidden');
                }
            } else if (modalActionType === 'rename-category') {
                const newName = document.getElementById('new-category-name-input').value.trim();
                if (newName && newName !== activeCategory && !categories.includes(newName)) {
                    // Cập nhật tên danh mục trong mảng categories
                    const oldName = activeCategory;
                    const index = categories.indexOf(oldName);
                    if (index > -1) {
                        categories[index] = newName;
                    }

                    // Cập nhật tên danh mục cho tất cả các công cụ liên quan
                    toolsData = toolsData.map(tool => {
                        if (tool.category === oldName) {
                            return { ...tool, category: newName };
                        }
                        return tool;
                    });
                    
                    saveToLocalStorage('categories', categories);
                    saveToLocalStorage('toolsData', toolsData);
                    
                    activeCategory = newName; // Cập nhật danh mục đang hoạt động
                    createFilterButtons();
                    renderTools(toolsData.filter(tool => tool.category === newName)); // Render lại công cụ với tên mới
                    
                    modalContainer.classList.add('hidden');
                    showNotification(`Đã đổi tên danh mục thành "${newName}".`);
                } else {
                    modalMessage.textContent = 'Tên danh mục không hợp lệ hoặc đã tồn tại.';
                    modalMessage.classList.remove('hidden');
                }
            } else if (modalActionType === 'delete-category') {
                if (activeCategory !== 'all') {
                    // Lọc ra các danh mục và công cụ cần giữ lại
                    categories = categories.filter(cat => cat !== activeCategory);
                    toolsData = toolsData.filter(tool => tool.category !== activeCategory);
                    
                    saveToLocalStorage('categories', categories);
                    saveToLocalStorage('toolsData', toolsData);

                    activeCategory = 'all'; // Chuyển về danh mục "Tất cả"
                    createFilterButtons();
                    renderTools(toolsData); // Render lại công cụ
                    
                    modalContainer.classList.add('hidden');
                    showNotification(`Đã xóa danh mục và các công cụ liên quan.`);
                }
            } else if (modalActionType === 'add-tool') {
                const name = document.getElementById('tool-name-input').value.trim();
                const icon = document.getElementById('tool-icon-input').value.trim() || '🤖';
                const description = document.getElementById('tool-description-input').value.trim();
                const instructions = document.getElementById('tool-instructions-input').value.trim();
                const url = document.getElementById('tool-url-input').value.trim();

                if (name && description && instructions && url) {
                    const newTool = {
                        id: nextToolId++,
                        name,
                        icon,
                        description,
                        instructions,
                        url,
                        category: activeCategory
                    };
                    toolsData.push(newTool);
                    saveToLocalStorage('toolsData', toolsData);
                    currentFilteredTools = toolsData.filter(tool => tool.category === activeCategory);
                    renderTools(currentFilteredTools);
                    modalContainer.classList.add('hidden');
                    showNotification(`Đã thêm công cụ "${name}".`);
                } else {
                    modalMessage.textContent = 'Vui lòng điền đầy đủ các trường.';
                    modalMessage.classList.remove('hidden');
                }
            }
        });

        // Event listener cho nút hủy trong modal
        modalCancelBtn.addEventListener('click', () => {
            modalContainer.classList.add('hidden');
            modalMessage.classList.add('hidden');
        });

        // Event listener để chỉnh sửa/lưu công cụ trong chế độ quản trị
        toolsContainer.addEventListener('click', (e) => {
            // Find the closest parent tool card
            const toolCard = e.target.closest('.ai-tool-card');
            if (!toolCard) return;

            // Find the specific buttons within this card
            const editBtn = e.target.closest('.edit-btn');
            const saveBtn = e.target.closest('.save-btn');
            const deleteBtn = e.target.closest('.delete-btn');

            const toolId = parseInt(toolCard.dataset.id);
            const tool = toolsData.find(t => t.id === toolId);
            if (!tool) return;

            if (editBtn) {
                // Chuyển sang chế độ chỉnh sửa
                toolCard.querySelectorAll('.tool-name-display, .tool-description-display, .tool-instructions-display, .tool-category-display, .tool-icon-display').forEach(el => el.classList.add('hidden'));
                toolCard.querySelectorAll('.editable-field').forEach(el => el.classList.remove('hidden'));
                editBtn.classList.add('hidden');
                // The save and delete buttons are now guaranteed to exist within the card
                toolCard.querySelector('.save-btn').classList.remove('hidden');
                toolCard.querySelector('.delete-btn').classList.add('hidden');
            } else if (saveBtn) {
                // Lưu các thay đổi
                const nameInput = toolCard.querySelector('[data-field="name"]').value;
                const descriptionInput = toolCard.querySelector('[data-field="description"]').value;
                const instructionsInput = toolCard.querySelector('[data-field="instructions"]').value;
                const urlInput = toolCard.querySelector('[data-field="url"]').value;
                
                tool.name = nameInput.trim();
                tool.description = descriptionInput.trim();
                tool.instructions = instructionsInput.trim();
                tool.url = urlInput.trim();

                // Cập nhật lại tool trong mảng chính
                const toolIndex = toolsData.findIndex(t => t.id === toolId);
                if (toolIndex !== -1) {
                    toolsData[toolIndex] = tool;
                }

                saveToLocalStorage('toolsData', toolsData);
                
                // Trở về chế độ hiển thị
                toolCard.querySelectorAll('.tool-name-display, .tool-description-display, .tool-instructions-display, .tool-category-display, .tool-icon-display').forEach(el => el.classList.remove('hidden'));
                toolCard.querySelectorAll('.editable-field').forEach(el => el.classList.add('hidden'));
                // The edit and delete buttons are now guaranteed to exist within the card
                toolCard.querySelector('.edit-btn').classList.remove('hidden');
                toolCard.querySelector('.save-btn').classList.add('hidden');
                if (toolCard.querySelector('.delete-btn')) { // Check if delete button exists before showing
                    toolCard.querySelector('.delete-btn').classList.remove('hidden');
                }
                
                renderTools(currentFilteredTools); // Render lại để cập nhật hiển thị
                showNotification(`Đã lưu thay đổi cho công cụ "${tool.name}".`);

            } else if (deleteBtn) {
                // Xóa công cụ
                modalActionType = 'delete-tool';
                modalContainer.classList.remove('hidden');
                modalTitle.textContent = 'Xác nhận xóa công cụ';
                modalContent.innerHTML = `<p class="text-sm text-rose-600">Bạn có chắc chắn muốn xóa công cụ "**${tool.name}**" không? Thao tác này không thể hoàn tác.</p>`;
                modalMessage.classList.add('hidden');

                // Thêm một event listener tạm thời để xử lý xóa khi xác nhận
                const confirmDelete = () => {
                    toolsData = toolsData.filter(t => t.id !== toolId);
                    saveToLocalStorage('toolsData', toolsData);
                    currentFilteredTools = toolsData.filter(tool => tool.category === activeCategory);
                    renderTools(currentFilteredTools);
                    modalContainer.classList.add('hidden');
                    showNotification(`Đã xóa công cụ "${tool.name}".`);
                    // Xóa event listener này để tránh lỗi
                    modalConfirmBtn.removeEventListener('click', confirmDelete);
                };
                modalConfirmBtn.addEventListener('click', confirmDelete);
            }
        });

        // Khởi tạo ứng dụng
        document.addEventListener('DOMContentLoaded', () => {
            createFilterButtons();
            renderTools(toolsData);
        });

    </script>
</body>
</html>
